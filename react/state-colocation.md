# 2023-02-18 (í† ) state ì½œë¡œì¼€ì´ì…˜

> ğŸš€ **TL;DR**
>
> VDOMì„ ì¬ì¡°ì •í•˜ëŠ” ê±´ ë¹„ìš©ì´ ë§ì´ ë“¤ê¸° ë•Œë¬¸ì— ë Œë”ë¥¼ ì‹ ê²½ì¨ì•¼ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ `useCallback`, `useMemo`, `React.memo`ë¡œ í•  ìˆ˜ ìˆëŠ”ë° ì´ê²ƒë„ ë¹„ìš©ì´ ë“œëŠ” ì¼ì´ê¸° ë•Œë¬¸ì— ê·¸ ì „ì— state-colocationì„ í•˜ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤. state-colocationì€ ë‘ê°€ì§€ ë°©ë²•ì´ ìˆëŠ”ë° ì²«ë²ˆì§¸ëŠ” ìƒíƒœê°€ ê´€ë ¨ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì™€ ìƒíƒœì™€ ê´€ë ¨ì—†ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‘ë²ˆì§¸ëŠ” childrenìœ¼ë¡œ ë„˜ê²¨ì£¼ëŠ” ë°©ë²•ì…ë‹ˆë‹¤(childrenì´ ì–´ë–»ê²Œ ë‹¤ì‹œ ë Œë”ë§ë˜ì§€ ì•ŠëŠ”ê±´ì§€ ì´í•´ê°€ ì•ˆ ê°€ìš”).

(ì–¸ì œ) Q. ë¦¬ì•¡íŠ¸ëŠ” ì–¸ì œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ë Œë”ë§í•˜ë‚˜ìš”?

> ìƒíƒœê°€ ë³€ê²½ë˜ë©´ ë¦¬ë Œë”ë§í•©ë‹ˆë‹¤.

(ì–´ë–»ê²Œ) Q. ë¦¬ì•¡íŠ¸ì—ì„œ ë Œë”ì™€ ì»¤ë°‹ì´ ìˆëŠ”ë° ê°œë°œìëŠ” ë‘ ê°œì¤‘ì— ì–´ë–¤ ê±¸ ë” ì‹ ê²½ ì¨ì•¼ í•˜ë‚˜ìš”?

> - ë Œë”: ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•´ì„œ ë¦¬ì•¡íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì–»ëŠ” ê²ƒ (with ì¬ì¡°ì •)
> - ì»¤ë°‹: ë¦¬ì•¡íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì‹¤ì œ DOMì— ë°˜ì˜í•˜ëŠ” ê²ƒ
>
> ë Œë”ë¥¼ ì‹ ê²½ì¨ì•¼ í•œë‹¤. ë Œë”ë¥¼ í•  ë•Œë§ˆë‹¤ ì´ì „ VDOMê³¼ ìƒˆ VDOMì˜ ë³€ê²½ì‚¬í•­ì„ ìµœì†Œí•œìœ¼ë¡œ ë°˜ì˜í•˜ê¸° ìœ„í•´ ë¹„êµí•˜ëŠ” ì¬ì¡°ì •ì„ í•´ì•¼ í•˜ëŠ”ë° ì¬ì¡°ì • ì—°ì‚°ì´ ì»¤ë°‹ì— ë¹„í•´ í›¨ì”¬ ë¹„ì‹¸ê¸° ë•Œë¬¸ì´ë‹¤.

(ì™œ) Q. state ì½œë¡œì¼€ì´ì…˜ì´ë€ ë¬´ì—‡ì´ê³  ì™œ í•´ì•¼ í•˜ë‚˜ìš”?

> ë¦¬ì•¡íŠ¸ì—ì„œ ë Œë”ëŠ” ì¬ì¡°ì •ì´ë¼ëŠ” ë¹„ì‹¼ ì—°ì‚°ì„ í•˜ê¸° ë•Œë¬¸ì— ìµœì†Œí™”í•˜ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ë Œë”ë§ì„ ìµœì†Œí™”í•˜ë ¤ë©´ ìµœì í™”ë¥¼ í•´ì•¼ í•˜ëŠ”ë° ë¦¬ì•¡íŠ¸ì—ì„œ ëŒ€í‘œì ì¸ ìµœì í™” ë°©ë²•ì´ `useMemo()`ê°€ ìˆê³ , `useCallback()`, `React.memo()`ê°€ ìˆìŠµë‹ˆë‹¤. ìµœì í™”ë¥¼ í•˜ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ë¹„ìš©ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ ì„¸ ê°€ì§€ ë°©ë²•ì€ í•­ìƒ ì‚¬ìš©í•˜ëŠ” ê²Œ ê¼­ ì¢‹ì€ ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.
>
> 1. ê°œë°œìëŠ” ë¦¬ì•¡íŠ¸ì˜ ë Œë”ë¥¼ ì‹ ê²½ ì¨ì•¼ í•œë‹¤.
> 2. (ì™œ?) ë Œë”ì—ì„œ ì¬ì¡°ì •í•˜ëŠ” ê³¼ì •ì´ ë¹„ì‹¸ê¸° ë•Œë¬¸ì´ë‹¤.
> 3. (ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ í•´?) ê·¸ë˜ì„œ `useMemo()`, `useCallback()`, `React.memo()`ë¥¼ ì‚¬ìš©í•´ì„œ ë©”ëª¨ì´ì œì´ì…˜ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> 4. (ê·¸ëŸ¬ë©´ í•­ìƒ ë©”ëª¨ì´ì œì´ì…˜ í•˜ë©´ ë˜ëŠ” ê±° ì•„ëƒ?) ê·¸ëŸ°ë° ìœ„ ì„¸ ê°€ì§€ ìµœì í™” ë©”ì„œë“œëŠ” ì‚¬ìš©í•˜ëŠ” ê²ƒì´ í•­ìƒ ì¢‹ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ì–´ë–¤ ê²½ìš°ì—ëŠ” ì˜¤íˆë ¤ ì„±ëŠ¥ì„ ë–¨ì–´ëœ¨ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> 5. (ê·¸ëŸ°ë°) state ì½œë¡œì¼€ì´ì…˜ì€ í•­ìƒ ìµœì í™”ì— ë„ì›€ì´ ë©ë‹ˆë‹¤. state ì½œë¡œì¼€ì´ì…˜ì„ í•˜ë©´ ë Œë”ì˜ ì¬ì¡°ì •ì— í•­ìƒ ë„ì›€ì´ ë©ë‹ˆë‹¤.

(ì–¸ì œ) Q. state ì½œë¡œì¼€ì´ì…˜ì„ í•  ìˆ˜ ìˆëŠ” ìƒí™©ì´ ì–¸ì œì¸ê°€ìš”?

> ì‹¤ì²œ

## ğŸ¤“ í•¨ê»˜ ì•Œê¸°

- [Chrome Developers - performance.now()](https://developer.chrome.com/blog/when-milliseconds-are-not-enough-performance-now/)

## ğŸ“š í•¨ê»˜ ì½ê¸°

- [Dan Abramov - memo()ë¥¼ í•˜ê¸° ì „ì—](https://overreacted.io/ko/before-you-memo/)
- [Developer way - The mystery of React Element, children, parents and re-renders](https://www.developerway.com/posts/react-elements-children-parents)
- [codesandbox - state colocation ìˆ˜ë ¨](https://codesandbox.io/s/state-colocation-forked-isi195?file=/src/App.js)
