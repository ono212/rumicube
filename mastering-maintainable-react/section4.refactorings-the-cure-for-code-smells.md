# 섹션4: 리팩터링해서 코드 스멜 없애기

## 리팩터링 뜻

- 관찰 가능한 동작을 변경하지 않고도 이해하기 쉽고 저렴하게 수정할 수 있도록 소프트웨어의 내부 구조를 변경하는 것

## 많이 하는 리팩터링

- 함수, 변수, 모듈, 클래스 이름 바꾸기 (rename)
  - 코드를 더 의미있게 만들거나 비즈니스 언어와 일치하도록 이름을 바꾼다.
- 필드, 함수 옮기기
- 변수, 함수, `type`, 클래스 **추출**하기
- 변수, 함수, `type``, 클래스 **인라인**화하기
  - 추출하는 것과 반대
  - 추상화가 필요하지 않은 경우
- special case 패턴을 사용해서 `if-else`체크문 없애기
- `for`루프 대신에 Collenction API(`map`, `filter` 같은) 사용하기
- 조건부 검사 대신에 (클래스를 추출하여) 다형성 사용하기
  - 다형성은 OOP의 가장 중요한 측면이다.

## 일반적인 리팩터링 10가지

- 기본적인 작은 리팩터링부터 익히는 것부터 시작해라.
- 이 10가지의 리팩터링은 크게 **추출(extract)** 과 **이동(move)** 이다.
  - 추출 리팩터링 : 변수, 함수, 타입에 대해 추출 리팩터링을 적용한다.
  - 이동 리팩터링 : 하나의 모듈을 별도의 파일로 분리하는 것, 리팩터링 후 인라인화, 추출 리팩터링처럼 변수, 함수, 타입에 대해서도 적용할 수 있다.

### 1. 변수로 추출해라.

- 너무 긴 표현식
- 개념을 나타내는 표현식

은 변수로 추출해라.

### 2. 함수로 추출해라.

- 함수가 너무 커지면 하위 함수로 추출해라.
- (왜냐) 추출하여 분리함으로써 어떤 함수인지 읽기 쉽고 수정하기도 쉬워진다.
- ex) map함수의 익명함수를 별도의 함수로 추출하기
  - 이렇게 했을 떄 장점
    - (어떤 콜백을 넣었는지 이름이 있는 별도의 함수로 추출했기 때문에) 읽기 쉬워진다.
    - 테스트하기 쉽다.
    - 다른 곳에서 재사용할 수도 있다.

### 3. 파라미터로 추출해라.

- 함수의 외부로부터 전달받아야 할 변수가 필요할 때 매개변수로 추출해라.
  - 외부에서 받아야할 변수를 전역 상수로는 사용하고 싶지 않을 때 사용해라.
- 매개변수로 추출하여 호출할 때 변수를 전달하면 된다.

### 4. 타입 정의로 추출해라.

- props목록이 너무 길어지면 타입으로 빼서 추출해라.
- (왜냐) props목록이 너무 길어지면 읽기 어려워진다. 또한 해당 컴포넌트가 너무 많은 작업을 수행하고 있다는 의미이기도 하다.
- 타입으로 따로 빼서 타입을 사용하는 곳 직전에 배치해라.
  - 필요하다면 모듈의 루트레벨에 있는 `types.ts`파일에 위치시켜라.

### 5. 문장을 슬라이드해라.

- 관련된 코드들끼리 가까이 뭉쳐놓아라.
- 적용하면 코드를 더 매끄럽고 일관성 있게 해준다.
- 뭉쳐놓은 문장들로 다른 함수를 추출하기가 더 쉬워진다.

### 6. 함수 선언을 변경해라.

- 함수에 새로운 동작이 추가되거나 기존 동작이 변경되면 함수 이름을 변경해야 한다.
  - (왜냐) 함수 이름에 함수가 하는 일이 담겨있어야하니까

### 7. 변수를 변경해라.

- 변수가 어떤 값을 담고있는지 변수명을 통해 알 수 있도록

### 8. 필드를 이동해라.

- 문장들을 상위 스코프로 밀어올리거나 몇가지 유틸리티 함수를 추출했을 때, 다른 모듈에서도 사용할 수 있도록 다른 곳으로 옮겨라.

### 9. 변수 인라인하기.

- 추출과 반대동작
- 한 번만 쓰이는 표현식일 경우 그냥 인라인화해서 사용해라.

### 10. 시그니처 바꾸기

- 매개변수 순서 변경
- 매개변수 추가 / 제거
- 타입 변경
- 시그니처 : 함수(or 메서드)의 이름, 매개변수 목록
